/**
 * DevExtreme (esm/__internal/core/localization/globalize/message.js)
 * Version: 25.2.3
 * Build date: Fri Dec 12 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/
 */
import "../../../core/localization/globalize/core";
import "globalize/message";
import coreLocalization from "../../../core/localization/core";
import messageLocalization from "../../../core/localization/message";
import Globalize from "globalize";
if (null !== Globalize && void 0 !== Globalize && Globalize.formatMessage) {
    const DEFAULT_LOCALE = "en";
    const originalLoadMessages = Globalize.loadMessages;
    Globalize.loadMessages = messages => {
        messageLocalization.load(messages)
    };
    const globalizeMessageLocalization = {
        engine: () => "globalize",
        ctor() {
            this.load(this._dictionary)
        },
        load(messages) {
            this.callBase(messages);
            originalLoadMessages(messages)
        },
        getMessagesByLocales: () => Globalize.cldr.get("globalize-messages"),
        getFormatter(key, locale) {
            const currentLocale = locale || coreLocalization.locale();
            let formatter = this._getFormatterBase(key, locale);
            if (!formatter) {
                formatter = this._formatterByGlobalize(key, locale)
            }
            if (!formatter && currentLocale !== DEFAULT_LOCALE) {
                formatter = this.getFormatter(key, DEFAULT_LOCALE)
            }
            return formatter
        },
        _formatterByGlobalize(key, locale) {
            const currentGlobalize = !locale || locale === coreLocalization.locale() ? Globalize : new Globalize(locale);
            let result;
            if (this._messageLoaded(key, locale)) {
                result = currentGlobalize.messageFormatter(key)
            }
            return result
        },
        _messageLoaded(key, locale) {
            const currentCldr = locale ? new Globalize(locale).cldr : Globalize.locale();
            const value = currentCldr.get(["globalize-messages/{bundle}", key]);
            return !!value
        },
        _loadSingle(key, value, locale) {
            const data = {};
            data[locale] = {};
            data[locale][key] = value;
            this.load(data)
        }
    };
    messageLocalization.inject(globalizeMessageLocalization)
}
